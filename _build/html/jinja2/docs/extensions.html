
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Extensions &mdash; Aura Dev documentation</title>
    
    <link rel="stylesheet" href="../../_static/jinja.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'Dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Aura Dev documentation" href="../../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">Aura Dev documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="extensions">
<span id="jinja-extensions"></span><h1>Extensions<a class="headerlink" href="#extensions" title="Permalink to this headline">¶</a></h1>
<p>Jinja2 supports extensions that can add extra filters, tests, globals or even
extend the parser.  The main motivation of extensions is it to move often used
code into a reusable class like adding support for internationalization.</p>
<div class="section" id="adding-extensions">
<h2>Adding Extensions<a class="headerlink" href="#adding-extensions" title="Permalink to this headline">¶</a></h2>
<p>Extensions are added to the Jinja2 environment at creation time.  Once the
environment is created additional extensions cannot be added.  To add an
extension pass a list of extension classes or import paths to the
<cite>environment</cite> parameter of the <tt class="xref py py-class docutils literal"><span class="pre">Environment</span></tt> constructor.  The following
example creates a Jinja2 environment with the i18n extension loaded:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">jinja_env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;jinja2.ext.i18n&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="section" id="i18n-extension">
<span id="id1"></span><h2>i18n Extension<a class="headerlink" href="#i18n-extension" title="Permalink to this headline">¶</a></h2>
<p><strong>Import name:</strong> <cite>jinja2.ext.i18n</cite></p>
<p>Jinja2 currently comes with one extension, the i18n extension.  It can be
used in combination with <a class="reference external" href="http://docs.python.org/dev/library/gettext">gettext</a> or <a class="reference external" href="http://babel.edgewall.org/">babel</a>.  If the i18n extension is
enabled Jinja2 provides a <cite>trans</cite> statement that marks the wrapped string as
translatable and calls <cite>gettext</cite>.</p>
<p>After enabling dummy <cite>_</cite> function that forwards calls to <cite>gettext</cite> is added
to the environment globals.  An internationalized application then has to
provide at least an <cite>gettext</cite> and optionally a <cite>ngettext</cite> function into the
namespace.  Either globally or for each rendering.</p>
<div class="section" id="environment-methods">
<h3>Environment Methods<a class="headerlink" href="#environment-methods" title="Permalink to this headline">¶</a></h3>
<p>After enabling of the extension the environment provides the following
additional methods:</p>
<dl class="method">
<dt id="jinja2.Environment.install_gettext_translations">
<tt class="descclassname">jinja2.Environment.</tt><tt class="descname">install_gettext_translations</tt><big>(</big><em>translations</em>, <em>newstyle=False</em><big>)</big><a class="headerlink" href="#jinja2.Environment.install_gettext_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs a translation globally for that environment.  The tranlations
object provided must implement at least <cite>ugettext</cite> and <cite>ungettext</cite>.
The <cite>gettext.NullTranslations</cite> and <cite>gettext.GNUTranslations</cite> classes
as well as <a class="reference external" href="http://babel.edgewall.org/">Babel</a>s <cite>Translations</cite> class are supported.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 2.5: </span>newstyle gettext added</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.install_null_translations">
<tt class="descclassname">jinja2.Environment.</tt><tt class="descname">install_null_translations</tt><big>(</big><em>newstyle=False</em><big>)</big><a class="headerlink" href="#jinja2.Environment.install_null_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Install dummy gettext functions.  This is useful if you want to prepare
the application for internationalization but don&#8217;t want to implement the
full internationalization system yet.</p>
<p class="versionchanged">
<span class="versionmodified">Changed in version 2.5: </span>newstyle gettext added</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.install_gettext_callables">
<tt class="descclassname">jinja2.Environment.</tt><tt class="descname">install_gettext_callables</tt><big>(</big><em>gettext</em>, <em>ngettext</em>, <em>newstyle=False</em><big>)</big><a class="headerlink" href="#jinja2.Environment.install_gettext_callables" title="Permalink to this definition">¶</a></dt>
<dd><p>Installs the given <cite>gettext</cite> and <cite>ngettext</cite> callables into the
environment as globals.  They are supposed to behave exactly like the
standard library&#8217;s <tt class="xref py py-func docutils literal"><span class="pre">gettext.ugettext()</span></tt> and
<tt class="xref py py-func docutils literal"><span class="pre">gettext.ungettext()</span></tt> functions.</p>
<p>If <cite>newstyle</cite> is activated, the callables are wrapped to work like
newstyle callables.  See <a class="reference internal" href="#newstyle-gettext"><em>Newstyle Gettext</em></a> for more information.</p>
<p class="versionadded">
<span class="versionmodified">New in version 2.5.</span></p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.uninstall_gettext_translations">
<tt class="descclassname">jinja2.Environment.</tt><tt class="descname">uninstall_gettext_translations</tt><big>(</big><big>)</big><a class="headerlink" href="#jinja2.Environment.uninstall_gettext_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Uninstall the translations again.</p>
</dd></dl>

<dl class="method">
<dt id="jinja2.Environment.extract_translations">
<tt class="descclassname">jinja2.Environment.</tt><tt class="descname">extract_translations</tt><big>(</big><em>source</em><big>)</big><a class="headerlink" href="#jinja2.Environment.extract_translations" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract localizable strings from the given template node or source.</p>
<p>For every string found this function yields a <tt class="docutils literal"><span class="pre">(lineno,</span> <span class="pre">function,</span>
<span class="pre">message)</span></tt> tuple, where:</p>
<ul class="simple">
<li><cite>lineno</cite> is the number of the line on which the string was found,</li>
<li><cite>function</cite> is the name of the <cite>gettext</cite> function used (if the
string was extracted from embedded Python code), and</li>
<li><cite>message</cite> is the string itself (a <cite>unicode</cite> object, or a tuple
of <cite>unicode</cite> objects for functions with multiple string arguments).</li>
</ul>
<p>If <a class="reference external" href="http://babel.edgewall.org/">Babel</a> is installed <a class="reference internal" href="integration.html#babel-integration"><em>the babel integration</em></a>
can be used to extract strings for babel.</p>
</dd></dl>

<p>For a web application that is available in multiple languages but gives all
the users the same language (for example a multilingual forum software
installed for a French community) may load the translations once and add the
translation methods to the environment at environment generation time:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">translations</span> <span class="o">=</span> <span class="n">get_gettext_translations</span><span class="p">()</span>
<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;jinja2.ext.i18n&#39;</span><span class="p">])</span>
<span class="n">env</span><span class="o">.</span><span class="n">install_gettext_translations</span><span class="p">(</span><span class="n">translations</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>get_gettext_translations</cite> function would return the translator for the
current configuration.  (For example by using <cite>gettext.find</cite>)</p>
<p>The usage of the <cite>i18n</cite> extension for template designers is covered as part
<a class="reference internal" href="templates.html#i18n-in-templates"><em>of the template documentation</em></a>.</p>
</div>
<div class="section" id="newstyle-gettext">
<span id="id2"></span><h3>Newstyle Gettext<a class="headerlink" href="#newstyle-gettext" title="Permalink to this headline">¶</a></h3>
<p class="versionadded">
<span class="versionmodified">New in version 2.5.</span></p>
<p>Starting with version 2.5 you can use newstyle gettext calls.  These are
inspired by trac&#8217;s internal gettext functions and are fully supported by
the babel extraction tool.  They might not work as expected by other
extraction tools in case you are not using Babel&#8217;s.</p>
<p>What&#8217;s the big difference between standard and newstyle gettext calls?  In
general they are less to type and less error prone.  Also if they are used
in an autoescaping environment they better support automatic escaping.
Here some common differences between old and new calls:</p>
<p>standard gettext:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello %(name)s!&#39;</span><span class="o">)|</span><span class="nf">format</span><span class="o">(</span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">ngettext</span><span class="o">(</span><span class="s1">&#39;%(num)d apple&#39;</span><span class="o">,</span> <span class="s1">&#39;%(num)d apples&#39;</span><span class="o">,</span> <span class="nv">apples</span><span class="o">|</span><span class="nf">count</span><span class="o">)|</span><span class="nf">format</span><span class="o">(</span>
    <span class="nv">num</span><span class="o">=</span><span class="nv">apples</span><span class="o">|</span><span class="nf">count</span>
<span class="o">)</span><span class="cp">}}</span>
</pre></div>
</div>
<p>newstyle gettext looks like this instead:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">gettext</span><span class="o">(</span><span class="s1">&#39;Hello %(name)s!&#39;</span><span class="o">,</span> <span class="nv">name</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="o">)</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="nv">ngettext</span><span class="o">(</span><span class="s1">&#39;%(num)d apple&#39;</span><span class="o">,</span> <span class="s1">&#39;%(num)d apples&#39;</span><span class="o">,</span> <span class="nv">apples</span><span class="o">|</span><span class="nf">count</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>The advantages of newstyle gettext is that you have less to type and that
named placeholders become mandatory.  The latter sounds like a
disadvantage but solves a lot of troubles translators are often facing
when they are unable to switch the positions of two placeholder.  With
newstyle gettext, all format strings look the same.</p>
<p>Furthermore with newstyle gettext, string formatting is also used if no
placeholders are used which makes all strings behave exactly the same.
Last but not least are newstyle gettext calls able to properly mark
strings for autoescaping which solves lots of escaping related issues many
templates are experiencing over time when using autoescaping.</p>
</div>
</div>
<div class="section" id="expression-statement">
<h2>Expression Statement<a class="headerlink" href="#expression-statement" title="Permalink to this headline">¶</a></h2>
<p><strong>Import name:</strong> <cite>jinja2.ext.do</cite></p>
<p>The &#8220;do&#8221; aka expression-statement extension adds a simple <cite>do</cite> tag to the
template engine that works like a variable expression but ignores the
return value.</p>
</div>
<div class="section" id="loop-controls">
<span id="loopcontrols-extension"></span><h2>Loop Controls<a class="headerlink" href="#loop-controls" title="Permalink to this headline">¶</a></h2>
<p><strong>Import name:</strong> <cite>jinja2.ext.loopcontrols</cite></p>
<p>This extension adds support for <cite>break</cite> and <cite>continue</cite> in loops.  After
enabling Jinja2 provides those two keywords which work exactly like in
Python.</p>
</div>
<div class="section" id="with-statement">
<span id="with-extension"></span><h2>With Statement<a class="headerlink" href="#with-statement" title="Permalink to this headline">¶</a></h2>
<p><strong>Import name:</strong> <cite>jinja2.ext.with_</cite></p>
<p class="versionadded">
<span class="versionmodified">New in version 2.3.</span></p>
<p>This extension adds support for the with keyword.  Using this keyword it
is possible to enforce a nested scope in a template.  Variables can be
declared directly in the opening block of the with statement or using a
standard <cite>set</cite> statement directly within.</p>
</div>
<div class="section" id="autoescape-extension">
<span id="id3"></span><h2>Autoescape Extension<a class="headerlink" href="#autoescape-extension" title="Permalink to this headline">¶</a></h2>
<p><strong>Import name:</strong> <cite>jinja2.ext.autoescape</cite></p>
<p class="versionadded">
<span class="versionmodified">New in version 2.4.</span></p>
<p>The autoescape extension allows you to toggle the autoescape feature from
within the template.  If the environment&#8217;s <tt class="xref py py-attr docutils literal"><span class="pre">autoescape</span></tt>
setting is set to <cite>False</cite> it can be activated, if it&#8217;s <cite>True</cite> it can be
deactivated.  The setting overriding is scoped.</p>
</div>
<div class="section" id="module-jinja2.ext">
<span id="id4"></span><span id="writing-extensions"></span><h2>Writing Extensions<a class="headerlink" href="#module-jinja2.ext" title="Permalink to this headline">¶</a></h2>
<p>By writing extensions you can add custom tags to Jinja2.  This is a non trival
task and usually not needed as the default tags and expressions cover all
common use cases.  The i18n extension is a good example of why extensions are
useful, another one would be fragment caching.</p>
<p>When writing extensions you have to keep in mind that you are working with the
Jinja2 template compiler which does not validate the node tree you are passing
to it.  If the AST is malformed you will get all kinds of compiler or runtime
errors that are horrible to debug.  Always make sure you are using the nodes
you create correctly.  The API documentation below shows which nodes exist and
how to use them.</p>
<div class="section" id="example-extension">
<h3>Example Extension<a class="headerlink" href="#example-extension" title="Permalink to this headline">¶</a></h3>
<p>The following example implements a <cite>cache</cite> tag for Jinja2 by using the
<a class="reference external" href="http://werkzeug.pocoo.org/">Werkzeug</a> caching contrib module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">nodes</span>
<span class="kn">from</span> <span class="nn">jinja2.ext</span> <span class="kn">import</span> <span class="n">Extension</span>


<span class="k">class</span> <span class="nc">FragmentCacheExtension</span><span class="p">(</span><span class="n">Extension</span><span class="p">):</span>
    <span class="c"># a set of names that trigger the extension.</span>
    <span class="n">tags</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="s">&#39;cache&#39;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">environment</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">FragmentCacheExtension</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">environment</span><span class="p">)</span>

        <span class="c"># add the defaults to the environment</span>
        <span class="n">environment</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="n">fragment_cache_prefix</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">,</span>
            <span class="n">fragment_cache</span><span class="o">=</span><span class="bp">None</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parser</span><span class="p">):</span>
        <span class="c"># the first token is the token that started the tag.  In our case</span>
        <span class="c"># we only listen to ``&#39;cache&#39;`` so this will be a name token with</span>
        <span class="c"># `cache` as value.  We get the line number so that we can give</span>
        <span class="c"># that line number to the nodes we create by hand.</span>
        <span class="n">lineno</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">next</span><span class="p">()</span><span class="o">.</span><span class="n">lineno</span>

        <span class="c"># now we parse a single expression that is used as cache key.</span>
        <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_expression</span><span class="p">()]</span>

        <span class="c"># if there is a comma, the user provided a timeout.  If not use</span>
        <span class="c"># None as second parameter.</span>
        <span class="k">if</span> <span class="n">parser</span><span class="o">.</span><span class="n">stream</span><span class="o">.</span><span class="n">skip_if</span><span class="p">(</span><span class="s">&#39;comma&#39;</span><span class="p">):</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">parse_expression</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nodes</span><span class="o">.</span><span class="n">Const</span><span class="p">(</span><span class="bp">None</span><span class="p">))</span>

        <span class="c"># now we parse the body of the cache block up to `endcache` and</span>
        <span class="c"># drop the needle (which would always be `endcache` in that case)</span>
        <span class="n">body</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_statements</span><span class="p">([</span><span class="s">&#39;name:endcache&#39;</span><span class="p">],</span> <span class="n">drop_needle</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

        <span class="c"># now return a `CallBlock` node that calls our _cache_support</span>
        <span class="c"># helper method on this extension.</span>
        <span class="k">return</span> <span class="n">nodes</span><span class="o">.</span><span class="n">CallBlock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">call_method</span><span class="p">(</span><span class="s">&#39;_cache_support&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">),</span>
                               <span class="p">[],</span> <span class="p">[],</span> <span class="n">body</span><span class="p">)</span><span class="o">.</span><span class="n">set_lineno</span><span class="p">(</span><span class="n">lineno</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_cache_support</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">timeout</span><span class="p">,</span> <span class="n">caller</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Helper callback.&quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache_prefix</span> <span class="o">+</span> <span class="n">name</span>

        <span class="c"># try to load the block from the cache</span>
        <span class="c"># if there is no fragment in the cache, render it and store</span>
        <span class="c"># it in the cache.</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rv</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">caller</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">environment</span><span class="o">.</span><span class="n">fragment_cache</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">rv</span><span class="p">,</span> <span class="n">timeout</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">rv</span>
</pre></div>
</div>
<p>And here is how you use it in an environment:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">jinja2</span> <span class="kn">import</span> <span class="n">Environment</span>
<span class="kn">from</span> <span class="nn">werkzeug.contrib.cache</span> <span class="kn">import</span> <span class="n">SimpleCache</span>

<span class="n">env</span> <span class="o">=</span> <span class="n">Environment</span><span class="p">(</span><span class="n">extensions</span><span class="o">=</span><span class="p">[</span><span class="n">FragmentCacheExtension</span><span class="p">])</span>
<span class="n">env</span><span class="o">.</span><span class="n">fragment_cache</span> <span class="o">=</span> <span class="n">SimpleCache</span><span class="p">()</span>
</pre></div>
</div>
<p>Inside the template it&#8217;s then possible to mark blocks as cacheable.  The
following example caches a sidebar for 300 seconds:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">cache</span> <span class="s1">&#39;sidebar&#39;</span><span class="o">,</span> <span class="m">300</span> <span class="cp">%}</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;sidebar&quot;</span><span class="nt">&gt;</span>
    ...
<span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="extension-api">
<h3>Extension API<a class="headerlink" href="#extension-api" title="Permalink to this headline">¶</a></h3>
<p>Extensions always have to extend the <tt class="xref py py-class docutils literal"><span class="pre">jinja2.ext.Extension</span></tt> class:</p>
</div>
<div class="section" id="parser-api">
<h3>Parser API<a class="headerlink" href="#parser-api" title="Permalink to this headline">¶</a></h3>
<p>The parser passed to <tt class="xref py py-meth docutils literal"><span class="pre">Extension.parse()</span></tt> provides ways to parse
expressions of different types.  The following methods may be used by
extensions:</p>
<p>There is also a utility function in the lexer module that can count newline
characters in strings:</p>
</div>
<div class="section" id="ast">
<h3>AST<a class="headerlink" href="#ast" title="Permalink to this headline">¶</a></h3>
<p>The AST (Abstract Syntax Tree) is used to represent a template after parsing.
It&#8217;s build of nodes that the compiler then converts into executable Python
code objects.  Extensions that provide custom statements can return nodes to
execute custom Python code.</p>
<p>The list below describes all nodes that are currently available.  The AST may
change between Jinja2 versions but will stay backwards compatible.</p>
<p>For more information have a look at the repr of <tt class="xref py py-meth docutils literal"><span class="pre">jinja2.Environment.parse()</span></tt>.</p>
<span class="target" id="module-jinja2.nodes"></span></div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../../index.html">
  <img class="logo" src="../../_static/aura-small.png" alt="Logo"/>
</a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Extensions</a><ul>
<li><a class="reference internal" href="#adding-extensions">Adding Extensions</a></li>
<li><a class="reference internal" href="#i18n-extension">i18n Extension</a><ul>
<li><a class="reference internal" href="#environment-methods">Environment Methods</a></li>
<li><a class="reference internal" href="#newstyle-gettext">Newstyle Gettext</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expression-statement">Expression Statement</a></li>
<li><a class="reference internal" href="#loop-controls">Loop Controls</a></li>
<li><a class="reference internal" href="#with-statement">With Statement</a></li>
<li><a class="reference internal" href="#autoescape-extension">Autoescape Extension</a></li>
<li><a class="reference internal" href="#module-jinja2.ext">Writing Extensions</a><ul>
<li><a class="reference internal" href="#example-extension">Example Extension</a></li>
<li><a class="reference internal" href="#extension-api">Extension API</a></li>
<li><a class="reference internal" href="#parser-api">Parser API</a></li>
<li><a class="reference internal" href="#ast">AST</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/jinja2/docs/extensions.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2013, Aura Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>